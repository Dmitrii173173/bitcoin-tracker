using System;
using System.IO;
using System.Text.Json;
using System.Collections.Generic;

public class BitcoinData
{
    public string Date { get; set; }
    public double Open { get; set; }
    public double Close { get; set; }
    public double High { get; set; }
    public double Low { get; set; }
    public double Volume { get; set; }
}

public class DataLoader
{
    public static List<BitcoinData> LoadBitcoinData(string filePath)
    {
        try
        {
            string jsonString = File.ReadAllText(filePath);
            return JsonSerializer.Deserialize<List<BitcoinData>>(jsonString);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Ошибка при чтении файла: {ex.Message}");
            return new List<BitcoinData>();
        }
    }

    public static void Main()
    {
        string dataPath = @"D:\A1\bitcoin-tracker\data\bitcoin_data.json";
        var data = LoadBitcoinData(dataPath);
        
        if (data.Count > 0)
        {
            Console.WriteLine($"Загружено {data.Count} записей");
            Console.WriteLine($"Первая запись: Дата: {data[0].Date}, Цена закрытия: {data[0].Close}");
            Console.WriteLine($"Последняя запись: Дата: {data[data.Count-1].Date}, Цена закрытия: {data[data.Count-1].Close}");
        }
        else
        {
            Console.WriteLine("Данные не загружены");
        }
    }
}